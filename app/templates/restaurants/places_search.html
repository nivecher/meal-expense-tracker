{% extends "base.html" %} {% block title %}Find Restaurants - Meal Expense Tracker{% endblock title %} {% block
extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/restaurant-places-search.css') }}" />
{% endblock extra_css %} {% block content %}
<!-- Breadcrumb Navigation -->
{% set breadcrumb_items = [ {'url': url_for('main.index'), 'title': 'Dashboard'}, {'url':
url_for('restaurants.list_restaurants'), 'title': 'Restaurants'}, {'title': 'Find Restaurants'} ] %} {% include
'includes/breadcrumb.html' %}

<div class="container-fluid mt-3">
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h1 class="h4 mb-0"> <i class="fas fa-map-marked-alt text-primary me-2"></i>Find Restaurants </h1>
                <a href="{{ url_for('restaurants.list_restaurants') }}" class="btn btn-outline-secondary">
                    <i class="fas fa-arrow-left me-1"></i> Back to My Restaurants
                </a>
            </div>

            <!-- Map-Based Restaurant Search -->
            <div id="map-restaurant-search-container">
                <!-- The map-based search component will be rendered here -->
            </div>

            <!-- Toast container for notifications -->
            <div id="toastContainer" class="position-fixed bottom-0 end-0 p-3 toast-container">
                <!-- Toasts will be inserted here by JavaScript -->
            </div>
        </div>
        {% endblock content %}

        <!-- Configuration data for JavaScript -->
        <script type="application/json" id="places-search-config">
            {
                "csrfToken": "{{ csrf_token() }}",
                "addRestaurantUrl": "{{ url_for('restaurants.add_from_google_places') }}",
                "googleMapsMapId": "{{ google_maps_map_id }}"
            }
        </script>

        {% block scripts %} {{ super() }}
        <!-- Load map-based restaurant search component -->
        <script type="module" src="{{ url_for('static', filename='js/components/map-restaurant-search.js') }}"></script>
        <!-- Load places search page functionality -->
        <script src="{{ url_for('static', filename='js/pages/places-search.js') }}"></script>

        <script>
            // Load configuration from JSON script tag
            document.addEventListener("DOMContentLoaded", function () {
                const configElement = document.getElementById("places-search-config");
                if (configElement) {
                    window.PLACES_SEARCH_CONFIG = JSON.parse(configElement.textContent);
                }
            });
        </script>
        {% endblock scripts %}
    </div></div
>
